<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Test</title>
<script type="text/javascript" src="d3/d3.v3.js"></script>
<style>
.box {
fill: #f44;
stroke: black;
stroke-width: 2px;
}

path
{
stroke: red;
stroke-width: 2px;
fill: none;
}

line
{
stroke: black;
stroke-width: 5px;
}

text
{
font-family: Arial;
font-size: 9pt;
}

</style>
</head>
<body>
<script type="text/javascript">
{

    var timeInterval = 50;
    //Drawing The object
    var w = 1000,
	h = 400;
    var svg = d3.select("body")
	.append("svg")
	.attr("width",w)
	.attr("height",h)
	.style("background-color","#66f");

    var dataset = [];
    var radi = h/10;
    var x1 = 100, y1 = h/2-radi;
    var x2 = 10, y2 = 5;
    var diag = svg.append("svg")
		  .attr("width" , w/2)
		  .attr("height", h/2)
		  .attr("y", h/4);
	
	
    var circles = diag.append("circle");

    circles.attr("cx", x1)
	.attr("cy", y1)
	.attr("r", radi)
	.attr("class", function(d,i){
		return "box";
		}) ;
    
    //animating the object
    var temp = y1;
    function update(){

	svg.selectAll("circle")
	    .transition()
	    .attr("cy", function(){
		    if(temp >= radi)
		    {
		        return temp--;
		    }
		    else{
			        return temp = y1;
		    }
	 });
    }
    
    //Drawing the plot
    var vis = svg.append("svg")
		 .attr("width", w/2)
		 .attr("height", h/2)
		 .attr("x", w/2)
		 .attr("y", h/4);

    var wi = w/4 ,
        hi = (h),
        margin = w/100,
        y3 = d3.scale.linear().domain([0, hi]).range([0 + margin, hi - margin]),
        x3 = d3.scale.linear().domain([0, wi]).range([0 + margin, wi - margin]);

    var g = vis.append("svg:g")
               .attr("transform", function(d, i) {
			return "translate("+ 0 +","+ hi  +")"
			});

    var line = d3.svg.line()
		     .x(function(d,i){ return x3(i); })
		     .y(function(d,i){ return y3(i); });
    
    g.append("svg:line")
     .attr("x1", 0)
     .attr("y1", -hi/2)
     .attr("x2", 0)
     .attr("y2", -hi);
                     
    g.append("svg:line")
     .attr("x1", 0)
     .attr("y1", -hi/2)
     .attr("x2", wi)
     .attr("y2", -hi/2);

    g.selectAll(".xLabel")
     .attr("class", "xLabel")
     .text(String)
     .attr("x", wi)
     .attr("y", 0)
     .attr("text-anchor", "middle");
                      
    g.selectAll(".yLabel")
     .attr("class", "yLabel")
     .text(String)
     .attr("x", 0)
     .attr("y", -1 * (hi/2) )
     .attr("text-anchor", "right")
     .attr("dy", 4);

    //Updating the objects y attribute to animate with time
    setInterval(function(){
	    update();
	    }, timeInterval);

    
}

</script>
</body>
</html>     
