<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Test</title>
<style type="text/css">
.redon
{
   fill: red;
   stroke: black;
   stroke-width: 2;
}
.yellowon
{
   fill: orange;
   stroke: black;
   stroke-width: 2;
}
.greenon
{
   fill: green;
   stroke: black;
   stroke-width: 2;
}
.redoff
{
   fill: red;
   stroke: black;
   stroke-width: 2;
   opacity: 50; 
}
.yellowoff
{
   fill: orange;
   stroke: black;
   stroke-width: 2;
   opacity: 50; 
}
.greenoff
{
   fill: green;
   stroke: black;
   stroke-width: 2;
   opacity: 50; 
}
</style>
<script type="text/javascript" src="d3/d3.v3.js"></script>
</head>

<body>

<button id="button">Off</button>
<script type="text/javascript">
var w=1000; 
var h=210;
var svg = d3.select("body")
             .append("svg")
             .attr("width",w)
             .attr("height",h);

var dataset = ["red","yellow","green"];

var circles = svg.selectAll("circle")
                 .data(dataset)
                 .enter()
                 .append("circle");

circles.attr("cx", w/2)
       .attr("cy", function(d, i){
                       return (i * 50) + 50 + (i * 5);
                   })
       .attr("r", 25)
       .attr("class", function(d){
                             return d+"on";
           }); 

var no = Math.floor(Math.random() * 3);

document.getElementById("button").onclick =  function() {
		circles.transition().attr("class", function(d,i){
						    if(i!=no)
							    {
								return d+"off";
								}
					 })}
</script>
</body>
</html>     
